import{K as e,L as t,k as a,o as l,c as s,w as i,a as n,t as o,d as c,f as r,e as u,g as m,M as d,n as h,F as p,b as f,i as _,h as y,u as g,C as b}from"./index-BnkPbRWe.js";import{_ as x}from"./uni-easyinput.CfPLPAmP.js";import{r as C}from"./uni-app.es.BNROM5dI.js";import{_ as k}from"./uni-datetime-picker.ClIA8vO2.js";import{W as D}from"./uni-cloud.es.BvYiEHyu.js";import{_ as v}from"./uni-icons.CBn4UW0X.js";import{_ as V}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as S,a as w}from"./uni-grid.BMxBP-g9.js";const I=V({name:"uni-data-select",mixins:[D.mixinDatacom||{}],props:{localdata:{type:Array,default:()=>[]},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},placeholder:{type:String,default:"请选择"},emptyTips:{type:String,default:"无选项"},clear:{type:Boolean,default:!0},defItem:{type:Number,default:0},disabled:{type:Boolean,default:!1},format:{type:String,default:""},placement:{type:String,default:"bottom"}},data:()=>({showSelector:!1,current:"",mixinDatacomResData:[],apps:[],channels:[],cacheKey:"uni-data-select-lastSelectedValue"}),created(){this.debounceGet=this.debounce((()=>{this.query()}),300),this.collection&&!this.localdata.length&&this.debounceGet()},computed:{typePlaceholder(){const e=this.placeholder,t={"opendb-stat-app-versions":"版本","opendb-app-channels":"渠道","opendb-app-list":"应用"}[this.collection];return t?e+t:e},valueCom(){return this.modelValue},textShow(){return this.current},getOffsetByPlacement(){switch(this.placement){case"top":return"bottom:calc(100% + 12px);";case"bottom":return"top:calc(100% + 12px);"}}},watch:{localdata:{immediate:!0,handler(e,t){Array.isArray(e)&&t!==e&&(this.mixinDatacomResData=e)}},valueCom(e,t){this.initDefVal()},mixinDatacomResData:{immediate:!0,handler(e){e.length&&this.initDefVal()}}},methods:{debounce(e,t=100){let a=null;return function(...l){a&&clearTimeout(a),a=setTimeout((()=>{e.apply(this,l)}),t)}},query(){this.mixinDatacomEasyGet()},onMixinDatacomPropsChange(){this.collection&&this.debounceGet()},initDefVal(){let e="";if(!this.valueCom&&0!==this.valueCom||this.isDisabled(this.valueCom)){let t;if(this.collection&&(t=this.getCache()),t||0===t)e=t;else{let t="";this.defItem>0&&this.defItem<=this.mixinDatacomResData.length&&(t=this.mixinDatacomResData[this.defItem-1].value),e=t}(e||0===e)&&this.emit(e)}else e=this.valueCom;const t=this.mixinDatacomResData.find((t=>t.value===e));this.current=t?this.formatItemName(t):""},isDisabled(e){let t=!1;return this.mixinDatacomResData.forEach((a=>{a.value===e&&(t=a.disable)})),t},clearVal(){this.emit(""),this.current="",this.collection&&this.removeCache()},change(e){e.disable||(this.showSelector=!1,this.current=this.formatItemName(e),this.emit(e.value))},emit(e){this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("change",e),this.collection&&this.setCache(e)},toggleSelector(){this.disabled||(this.showSelector=!this.showSelector)},formatItemName(e){let{text:t,value:a,channel_code:l}=e;if(l=l?`(${l})`:"",this.format){let t="";t=this.format;for(let a in e)t=t.replace(new RegExp(`{${a}}`,"g"),e[a]);return t}return this.collection.indexOf("app-list")>0?`${t}(${a})`:t||`未命名${l}`},getLoadData(){return this.mixinDatacomResData},getCurrentCacheKey(){return this.collection},getCache(t=this.getCurrentCacheKey()){return(e(this.cacheKey)||{})[t]},setCache(a,l=this.getCurrentCacheKey()){let s=e(this.cacheKey)||{};s[l]=a,t(this.cacheKey,s)},removeCache(a=this.getCurrentCacheKey()){let l=e(this.cacheKey)||{};delete l[a],t(this.cacheKey,l)}}},[["render",function(e,t,b,x,k,D){const V=_,S=C(a("uni-icons"),v),w=y,I=g;return l(),s(V,{class:"uni-stat__select"},{default:i((()=>[b.label?(l(),n("span",{key:0,class:"uni-label-text hide-on-phone"},o(b.label+"："),1)):c("",!0),r(V,{class:u(["uni-stat-box",{"uni-stat__actived":k.current}])},{default:i((()=>[r(V,{class:u(["uni-select",{"uni-select--disabled":b.disabled}])},{default:i((()=>[r(V,{class:"uni-select__input-box",onClick:D.toggleSelector},{default:i((()=>[k.current?(l(),s(V,{key:0,class:"uni-select__input-text"},{default:i((()=>[m(o(D.textShow),1)])),_:1})):(l(),s(V,{key:1,class:"uni-select__input-text uni-select__input-placeholder"},{default:i((()=>[m(o(D.typePlaceholder),1)])),_:1})),k.current&&b.clear&&!b.disabled?(l(),s(V,{key:"clear-button",onClick:d(D.clearVal,["stop"])},{default:i((()=>[r(S,{type:"clear",color:"#c0c4cc",size:"24"})])),_:1},8,["onClick"])):(l(),s(V,{key:"arrow-button"},{default:i((()=>[r(S,{type:k.showSelector?"top":"bottom",size:"14",color:"#999"},null,8,["type"])])),_:1}))])),_:1},8,["onClick"]),k.showSelector?(l(),s(V,{key:0,class:"uni-select--mask",onClick:D.toggleSelector},null,8,["onClick"])):c("",!0),k.showSelector?(l(),s(V,{key:1,class:"uni-select__selector",style:h(D.getOffsetByPlacement)},{default:i((()=>[r(V,{class:u("bottom"==b.placement?"uni-popper__arrow_bottom":"uni-popper__arrow_top")},null,8,["class"]),r(I,{"scroll-y":"true",class:"uni-select__selector-scroll"},{default:i((()=>[0===k.mixinDatacomResData.length?(l(),s(V,{key:0,class:"uni-select__selector-empty"},{default:i((()=>[r(w,null,{default:i((()=>[m(o(b.emptyTips),1)])),_:1})])),_:1})):(l(!0),n(p,{key:1},f(k.mixinDatacomResData,((e,t)=>(l(),s(V,{class:"uni-select__selector-item",key:t,onClick:t=>D.change(e)},{default:i((()=>[r(w,{class:u({"uni-select__selector__disabled":e.disable})},{default:i((()=>[m(o(D.formatItemName(e)),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])):c("",!0)])),_:1},8,["class"])])),_:1},8,["class"])])),_:1})}],["__scopeId","data-v-391be928"]]);const K=V({data:()=>({searchValue:"",timerange:["",""],value:null,range:[{value:0,text:"篮球"},{value:1,text:"足球"},{value:2,text:"游泳"}],list:[{name:"任务盈利"},{name:"团队佣金"},{name:"下级总数"},{name:"投票积分"},{name:"派彩金额"},{name:"活动礼金"},{name:"投票人数"},{name:"首充人数"},{name:"注册人数"},{name:"三方盈利"},{name:"三方投票"},{name:"三方人数"}]}),methods:{iconClick(){b({title:"点击了",icon:"none"})},change(e){console.log("e:",e)}}},[["render",function(e,t,c,u,d,h){const g=C(a("uni-easyinput"),x),b=C(a("uni-datetime-picker"),k),D=C(a("uni-data-select"),I),v=_,V=y,K=C(a("uni-grid-item"),S),R=C(a("uni-grid"),w);return l(),s(v,{class:"p-10"},{default:i((()=>[r(g,{prefixIcon:"search",confirmType:"search",modelValue:d.searchValue,"onUpdate:modelValue":t[0]||(t[0]=e=>d.searchValue=e),placeholder:"f86001",onIconClick:h.iconClick},null,8,["modelValue","onIconClick"]),r(v,{class:"mt-10 flex-between-center",style:{gap:"10px"}},{default:i((()=>[r(b,{modelValue:d.timerange,"onUpdate:modelValue":t[1]||(t[1]=e=>d.timerange=e),type:"daterange"},null,8,["modelValue"]),r(v,{class:"",style:{width:"25%"}},{default:i((()=>[r(D,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),localdata:d.range,onChange:h.change},null,8,["modelValue","localdata","onChange"])])),_:1})])),_:1}),r(v,{class:"mt-10 fs-14"},{default:i((()=>[r(R,{column:4,highlight:!0,showBorder:!1,onChange:h.change},{default:i((()=>[(l(!0),n(p,null,f(d.list,((e,t)=>(l(),s(K,{index:t,key:t},{default:i((()=>[r(v,{class:"grid-item-box text-center",style:{"background-color":"#fff"}},{default:i((()=>[r(V,{style:{display:"block",color:"red"}},{default:i((()=>[m("0")])),_:1}),r(V,{class:"text mt-5"},{default:i((()=>[m(o(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["index"])))),128))])),_:1},8,["onChange"])])),_:1})])),_:1})}],["__scopeId","data-v-34848de7"]]);export{K as default};
