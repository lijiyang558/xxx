import{x as e,l as t,k as a,o,c as l,w as s,i,f as r,a as n,b as c,F as u,g as d,d as m,u as p,q as h,t as f,h as g}from"./index-D0U_9w8I.js";import{_ as y,a as v}from"./uv-sticky.BeCKMTLB.js";import{r as _}from"./uni-app.es.vL0V2sTy.js";import{_ as x}from"./uv-back-top.CCHvtVWP.js";import{c as S,k as b,l as k}from"./index.DEsvId-E.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-icon.D3-77230.js";const w=j({data:()=>({tags:[{name:"推荐",value:"recommend"},{name:"热门",value:"hot"},{name:"影视",value:"movie"},{name:"综艺",value:"variety"},{name:"动漫",value:"anime"},{name:"音乐",value:"music"},{name:"时尚",value:"fashion"},{name:"美食",value:"food"},{name:"科技",value:"tech"},{name:"体育",value:"sport"},{name:"汽车",value:"car"},{name:"游戏",value:"game"}],list:[],page:1,pageSize:10,loading:!1,noMore:!1,scrollTop:0,customStyle:{fontSize:"24rpx",background:"var(--theme-primary-color)"},iconStyle:{fontSize:"32rpx",color:"#fff"},current:0,BASE_URL:S.BASE_URL}),onPageScroll(e){this.scrollTop=e.scrollTop},onLoad(){b().then((e=>{this.tags=e.data,this.loadData()}))},onPullDownRefresh(){this.page=1,this.loadData((()=>{e()}))},onReachBottom(){this.noMore?e():this.loadMore()},methods:{async loadData(e){this.loading=!0;try{const t={page:this.page,size:this.pageSize,type_id:this.tags[this.current].type_id},a=await k(t);1===this.page?this.list=a.data.list:this.list=this.list.concat(a.data.list),a.data.list.length<this.pageSize&&(this.noMore=!0)}catch(t){console.error("数据加载失败:",t)}finally{this.loading=!1,e&&"function"==typeof e&&e()}},loadMore(){this.page++,this.loadData()},click(e){const{index:t}=e;this.current=t,this.page=1,this.loadData(),console.log("item",e)},jumpVideoPage(e){t({url:"/pages/member-video/detail?id="+e.vod_id})}}},[["render",function(e,t,S,b,k,j){const w=_(a("uv-tabs"),y),z=_(a("uv-sticky"),v),M=g,C=i,D=_(a("uv-back-top"),x),R=p;return o(),l(C,{style:{"padding-bottom":"50px"}},{default:s((()=>[r(z,{bgColor:"var(--theme-primary-color)"},{default:s((()=>[r(w,{style:{background:"var(--theme-primary-color)"},list:k.tags,current:k.current,keyName:"type_name",activeStyle:{color:"red"},inactiveStyle:{color:"#fff"},lineColor:"red",onClick:j.click},null,8,["list","current","onClick"])])),_:1}),r(R,{"scroll-y":"true","show-scrollbar":!1,onScrolltolower:j.loadMore},{default:s((()=>[r(C,{class:"p-15 grid-container-2",style:{"box-sizing":"border-box"}},{default:s((()=>[(o(!0),n(u,null,c(k.list,((e,t)=>(o(),l(C,{class:"",key:t,style:{position:"relative"},onClick:t=>j.jumpVideoPage(e)},{default:s((()=>[h("img",{src:k.BASE_URL+e.image,style:{width:"100%",height:"150px","border-radius":"8px"},alt:""},null,8,["src"]),r(C,{class:"flex-between-center fs-12 bottom-text"},{default:s((()=>[r(M,{style:{display:"block"},class:"ellipsis-text"},{default:s((()=>[d(f(e.vod_name),1)])),_:2},1024),r(M,null,{default:s((()=>[d(f(e.duration),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),k.loading?(o(),l(C,{key:0,class:"loading-text text-center text-subtitle fs-14"},{default:s((()=>[d("加载中...")])),_:1})):k.noMore?(o(),l(C,{key:1,class:"no-more-text text-center text-subtitle fs-14"},{default:s((()=>[d("没有更多数据了")])),_:1})):m("",!0),r(D,{"scroll-top":k.scrollTop,customStyle:k.customStyle,iconStyle:k.iconStyle},null,8,["scroll-top","customStyle","iconStyle"])])),_:1},8,["onScrolltolower"])])),_:1})}],["__scopeId","data-v-43c07a0e"]]);export{w as default};
