import{L as e,k as a,o as s,c as l,w as t,i as o,f as r,a as n,b as u,F as i,g as m,d as c,h as d,W as f,v as b,t as p,n as h}from"./index-CQWRSADR.js";import{_,a as g}from"./uni-forms.fSMUswAt.js";import{r as F}from"./uni-app.es.BAfEDH2s.js";import{_ as k}from"./uni-file-picker.CP2C8fuW.js";import{c as D,t as y,F as V,G as x}from"./index.BEEcvY7I.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-cloud.es.nK3Y4JQn.js";const{uploadFile:j}=x;const U=v({data:()=>({tags:[{name:"微信",value:"wx"},{name:"支付宝",value:"zfb"},{name:"银行卡",value:"bank"}],current:0,baseFormData:{name:"",bank_name:"微信",bank_code:"",image:""},value:0,range:[{value:0,text:"微信"},{value:1,text:"支付宝"},{value:2,text:"银行卡"}],imageValue:[],BASE_URL:D.BASE_URL}),watch:{current(e,a){0===e?(this.baseFormData.bank_name="微信",this.baseFormData.image="",this.$refs.files.clearFiles()):1===e?(this.baseFormData.bank_name="支付宝",this.baseFormData.image="",this.$refs.files.clearFiles()):(this.baseFormData.bank_name="",this.baseFormData.image="",this.$refs.files.clearFiles())}},onLoad(){},methods:{change(e){console.log("e:",e)},select(e){const a=e.tempFilePaths[0];j(a).then((e=>{1==e.code&&(this.baseFormData.image=e.data.url)}))},progress(e){console.log("上传进度：",e)},success(e){console.log("上传成功")},fail(e){console.log("上传失败：",e),this.$refs.files.clearFiles()},submit(){if(!this.baseFormData.name)return y(0===this.current?"请输入微信昵称":"请输入真实姓名");if(!this.baseFormData.bank_name)return y("请输入银行名称");if(2===this.current&&!this.baseFormData.bank_code)return y("请输入银行卡号");if(!this.baseFormData.image&&this.current<2)return y("请按要求上传图片");const a={type:this.tags[this.current].value,...this.baseFormData};V(a).then((a=>{1===a.code&&e({delta:1}),y(a.msg)})).catch((e=>{console.log(e)}))}}},[["render",function(e,D,y,V,x,v){const j=d,U=o,S=f,w=F(a("uni-forms-item"),_),C=F(a("uni-file-picker"),k),L=b,$=F(a("uni-forms"),g);return s(),l(U,null,{default:t((()=>[r(U,{class:"p-10 flex-center",style:{background:"var(--theme-primary-color)","box-sizing":"border-box",color:"#fff","justify-content":"space-around"}},{default:t((()=>[(s(!0),n(i,null,u(x.tags,((e,a)=>(s(),l(U,{class:"flex-center2",style:{"flex-direction":"column"},key:a,onClick:e=>x.current=a},{default:t((()=>[r(j,null,{default:t((()=>[m(p(e.name),1)])),_:2},1024),r(U,{class:"mt-5",style:h({width:"24px",height:"5px",background:x.current===a?"#fff":"","border-radius":"4px"})},null,8,["style"])])),_:2},1032,["onClick"])))),128))])),_:1}),r(U,{class:"p-10 fs-14",style:{background:"#f5f5f5"}},{default:t((()=>[m(" 请输入您的身份信息 ")])),_:1}),r(U,{class:"p-10 fs-14"},{default:t((()=>[r($,{ref:"baseForm",modelValue:x.baseFormData},{default:t((()=>[0===x.current?(s(),l(w,{key:0,label:"微信昵称"},{default:t((()=>[r(S,{class:"uni-input",modelValue:x.baseFormData.name,"onUpdate:modelValue":D[0]||(D[0]=e=>x.baseFormData.name=e),placeholder:"请输入微信昵称"},null,8,["modelValue"])])),_:1})):c("",!0),x.current>0?(s(),l(w,{key:1,label:"真实姓名"},{default:t((()=>[r(S,{class:"uni-input",modelValue:x.baseFormData.name,"onUpdate:modelValue":D[1]||(D[1]=e=>x.baseFormData.name=e),placeholder:"请输入真实姓名"},null,8,["modelValue"])])),_:1})):c("",!0),r(w,{label:"银行名称"},{default:t((()=>[r(S,{class:"uni-input",disabled:x.current<2,modelValue:x.baseFormData.bank_name,"onUpdate:modelValue":D[2]||(D[2]=e=>x.baseFormData.bank_name=e),placeholder:"请输入银行名称"},null,8,["disabled","modelValue"])])),_:1}),2===x.current?(s(),l(w,{key:2,label:"银行卡号"},{default:t((()=>[r(S,{class:"uni-input",modelValue:x.baseFormData.bank_code,"onUpdate:modelValue":D[3]||(D[3]=e=>x.baseFormData.bank_code=e),placeholder:"请输入银行卡号"},null,8,["modelValue"])])),_:1})):c("",!0),r(U,{class:"",style:{color:"red"}},{default:t((()=>[m(" 尊敬的会员，为了保障您的顺利提现，请填写 "),0===x.current?(s(),l(j,{key:0},{default:t((()=>[m("微信昵称和正确上传微信收款码")])),_:1})):c("",!0),1===x.current?(s(),l(j,{key:1},{default:t((()=>[m("真实姓名和正确上传支付宝收款码")])),_:1})):c("",!0),2===x.current?(s(),l(j,{key:2},{default:t((()=>[m("银行卡信息")])),_:1})):c("",!0),m("。（平台会保障您的资金和隐私安全，请您放心） ")])),_:1}),x.current<2?(s(),l(U,{key:3,class:"p-15"},{default:t((()=>[r(C,{ref:"files",modelValue:x.imageValue,"onUpdate:modelValue":D[4]||(D[4]=e=>x.imageValue=e),fileMediatype:"image",limit:"1",onSelect:v.select,onProgress:v.progress,onSuccess:v.success,onFail:v.fail},null,8,["modelValue","onSelect","onProgress","onSuccess","onFail"])])),_:1})):c("",!0),r(U,{class:"p-15",style:{"margin-top":"50px"}},{default:t((()=>[r(L,{class:"primary-button",style:{width:"100%"},size:"mini",onClick:v.submit},{default:t((()=>[m("确定绑定")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}],["__scopeId","data-v-d32280d7"]]);export{U as default};
