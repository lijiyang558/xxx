import{x as t,k as e,o,c as l,w as a,i as s,f as r,a as n,b as i,F as c,g as f,d as u,u as d,t as p,n as m,h}from"./index-D0U_9w8I.js";import{_ as g}from"./uv-back-top.CCHvtVWP.js";import{r as y}from"./uni-app.es.vL0V2sTy.js";import{w as _,E as x}from"./index.DEsvId-E.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-icon.D3-77230.js";const S=b({data:()=>({list:[],pageConf:{page:1,size:10},loading:!1,noMore:!1,scrollTop:0,customStyle:{fontSize:"24rpx",background:"var(--theme-primary-color)"},iconStyle:{fontSize:"32rpx",color:"#fff"}}),onLoad(){this.loadData()},onPageScroll(t){this.scrollTop=t.scrollTop},onPullDownRefresh(){this.pageConf.page=1,this.loadData((()=>{t()}))},onReachBottom(){this.noMore?t():this.loadMore()},methods:{formatTime:_,async loadData(t){this.loading=!0;try{const e=await x(this.pageConf);1===this.pageConf.page?this.list=e.data.list:this.list=this.list.concat(e.data.list),e.data.list.length<this.pageConf.size&&(this.noMore=!0)}catch(e){console.error("数据加载失败:",e)}finally{this.loading=!1,t&&"function"==typeof t&&t()}},loadMore(){this.pageConf.page++,this.loadData()}}},[["render",function(t,_,x,b,S,w){const k=h,M=s,j=y(e("uv-back-top"),g),v=d;return o(),l(M,{class:"p-10 fs-14"},{default:a((()=>[r(v,{"scroll-y":"true","show-scrollbar":!1,onScrolltolower:w.loadMore},{default:a((()=>[r(M,null,{default:a((()=>[(o(!0),n(c,null,i(S.list,((t,e)=>(o(),l(M,{class:"bg-white p-10 mb-10",style:{"border-radius":"4px"},key:e},{default:a((()=>[r(M,{class:"flex-between-center"},{default:a((()=>[r(k,null,{default:a((()=>[f("之后："+p(t.after),1)])),_:2},1024),r(k,null,{default:a((()=>[f("之前："+p(t.before),1)])),_:2},1024)])),_:2},1024),r(M,{class:"flex-between-center mt-10"},{default:a((()=>[r(k,{style:m({color:t.score<0?"#ff0000":""})},{default:a((()=>[f(p(t.score),1)])),_:2},1032,["style"]),r(k,null,{default:a((()=>[f(p(t.memo),1)])),_:2},1024)])),_:2},1024),r(M,{class:"mt-10 fs-12 flex-between-center"},{default:a((()=>[r(k,{style:{color:"#555"}},{default:a((()=>[f("时间："+p(w.formatTime(1e3*t.createtime)),1)])),_:2},1024),r(k,null,{default:a((()=>[f("兑换比例："+p(t.scale),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),S.loading?(o(),l(M,{key:0,class:"loading-text text-center text-subtitle fs-14"},{default:a((()=>[f("加载中...")])),_:1})):S.noMore?(o(),l(M,{key:1,class:"no-more-text text-center text-subtitle fs-14"},{default:a((()=>[f("没有更多数据了")])),_:1})):u("",!0),r(j,{"scroll-top":S.scrollTop,customStyle:S.customStyle,iconStyle:S.iconStyle},null,8,["scroll-top","customStyle","iconStyle"])])),_:1},8,["onScrolltolower"])])),_:1})}],["__scopeId","data-v-05809acf"]]);export{S as default};
