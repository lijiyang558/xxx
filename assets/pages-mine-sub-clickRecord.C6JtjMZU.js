import{x as t,k as e,o,c as a,w as l,i as s,f as r,a as n,b as i,F as c,g as f,d,u as p,t as u,h as m}from"./index-BnkPbRWe.js";import{_ as h}from"./uv-back-top.zZVdDyY0.js";import{r as g}from"./uni-app.es.BNROM5dI.js";import{w as y,x}from"./index.t3y0XkbU.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-icon.DQRZrmo7.js";const b=_({data:()=>({list:[],pageConf:{page:1,size:10},loading:!1,noMore:!1,scrollTop:0,customStyle:{fontSize:"24rpx",background:"var(--theme-primary-color)"},iconStyle:{fontSize:"32rpx",color:"#fff"}}),onLoad(){this.loadData()},onPageScroll(t){this.scrollTop=t.scrollTop},onPullDownRefresh(){this.pageConf.page=1,this.loadData((()=>{t()}))},onReachBottom(){this.noMore?t():this.loadMore()},methods:{formatTime:y,async loadData(t){this.loading=!0;try{const e=await x(this.pageConf);1===this.pageConf.page?this.list=e.data.list:this.list=this.list.concat(e.data.list),e.data.list.length<this.pageConf.size&&(this.noMore=!0)}catch(e){console.error("数据加载失败:",e)}finally{this.loading=!1,t&&"function"==typeof t&&t()}},loadMore(){this.pageConf.page++,this.loadData()}}},[["render",function(t,y,x,_,b,S){const w=m,k=s,M=g(e("uv-back-top"),h),j=p;return o(),a(k,{class:"p-10 fs-14"},{default:l((()=>[r(j,{"scroll-y":"true","show-scrollbar":!1,onScrolltolower:S.loadMore},{default:l((()=>[r(k,null,{default:l((()=>[(o(!0),n(c,null,i(b.list,((t,e)=>(o(),a(k,{class:"bg-white p-10 mb-10",style:{"border-radius":"4px"},key:e},{default:l((()=>[r(k,{class:"flex-between-center"},{default:l((()=>[r(w,null,{default:l((()=>[f("类型："+u(1==t.type?"视频":2==t.type?"开奖":"选妃"),1)])),_:2},1024)])),_:2},1024),r(k,{class:"flex-between-center mt-10"},{default:l((()=>[r(w,null,{default:l((()=>[f(u(t.name),1)])),_:2},1024)])),_:2},1024),r(k,{class:"mt-10 fs-12 flex-between-center"},{default:l((()=>[r(w,{style:{color:"#555"}},{default:l((()=>[f("时间："+u(S.formatTime(1e3*t.createtime)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),b.loading?(o(),a(k,{key:0,class:"loading-text text-center text-subtitle fs-14"},{default:l((()=>[f("加载中...")])),_:1})):b.noMore?(o(),a(k,{key:1,class:"no-more-text text-center text-subtitle fs-14"},{default:l((()=>[f("没有更多数据了")])),_:1})):d("",!0),r(M,{"scroll-top":b.scrollTop,customStyle:b.customStyle,iconStyle:b.iconStyle},null,8,["scroll-top","customStyle","iconStyle"])])),_:1},8,["onScrolltolower"])])),_:1})}],["__scopeId","data-v-8819bdba"]]);export{b as default};
