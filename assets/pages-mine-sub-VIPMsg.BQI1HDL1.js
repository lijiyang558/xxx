import{z as t,E as o,k as a,o as s,c as e,w as l,i,f as r,a as n,b as c,F as d,g as f,d as p,x as u,U as m,V as h,t as g,h as y}from"./index-QM6YRZWD.js";import{_}from"./uv-back-top.CQAyvELo.js";import{r as x}from"./uni-app.es.CqVc5pWo.js";import{w as b,y as S,z as k}from"./index.n6aPFrLu.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-icon.Cw_CO3pk.js";const w=C({data:()=>({list:[],pageConf:{page:1,size:10},loading:!1,noMore:!1,scrollTop:0,customStyle:{fontSize:"24rpx",background:"var(--theme-primary-color)"},iconStyle:{fontSize:"32rpx",color:"#fff"}}),onLoad(){this.loadData()},onPageScroll(t){this.scrollTop=t.scrollTop},onPullDownRefresh(){this.pageConf.page=1,this.loadData((()=>{t()}))},onReachBottom(){this.noMore?t():this.loadMore()},methods:{formatTime:b,async loadData(t){this.loading=!0;try{const o=await S(this.pageConf);1===this.pageConf.page?this.list=o.data.list:this.list=this.list.concat(o.data.list),o.data.list.length<this.pageConf.size&&(this.noMore=!0)}catch(o){console.error("数据加载失败:",o)}finally{this.loading=!1,t&&"function"==typeof t&&t()}},loadMore(){this.pageConf.page++,this.loadData()},readClick(t){k({msgid:t.id}).then((a=>{1===a.code?t.is_read=1:o({title:a.msg,icon:"none"})}))}}},[["render",function(t,o,b,S,k,C){const w=y,v=i,M=x(a("uv-back-top"),_),j=u;return s(),e(v,{class:"p-10 fs-14"},{default:l((()=>[r(j,{"scroll-y":"true","show-scrollbar":!1,onScrolltolower:C.loadMore},{default:l((()=>[r(v,null,{default:l((()=>[(s(!0),n(d,null,c(k.list,((t,o)=>(s(),e(v,{class:"bg-white p-10 mb-10",style:{"border-radius":"4px"},key:o},{default:l((()=>[r(v,{class:"fs-12",style:{"text-align":"right"}},{default:l((()=>[m(r(w,null,{default:l((()=>[f("已读")])),_:2},1536),[[h,1==t.is_read]]),m(r(w,{style:{padding:"5px",background:"#ff0000",color:"#fff","border-radius":"6px"},onClick:o=>C.readClick(t)},{default:l((()=>[f("标为已读")])),_:2},1032,["onClick"]),[[h,0==t.is_read]])])),_:2},1024),r(v,{class:"mt-10"},{default:l((()=>[f("标题："+g(t.title),1)])),_:2},1024),r(v,{class:"mt-10"},{default:l((()=>[f("信息："+g(t.msg),1)])),_:2},1024),r(v,{class:"mt-10 fs-12 flex-between-center"},{default:l((()=>[r(w,{style:{color:"#555"}},{default:l((()=>[f("时间："+g(C.formatTime(1e3*t.createtime)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),k.loading?(s(),e(v,{key:0,class:"loading-text text-center text-subtitle fs-14"},{default:l((()=>[f("加载中...")])),_:1})):k.noMore?(s(),e(v,{key:1,class:"no-more-text text-center text-subtitle fs-14"},{default:l((()=>[f("没有更多数据了")])),_:1})):p("",!0),r(M,{"scroll-top":k.scrollTop,customStyle:k.customStyle,iconStyle:k.iconStyle},null,8,["scroll-top","customStyle","iconStyle"])])),_:1},8,["onScrolltolower"])])),_:1})}],["__scopeId","data-v-7dc70c07"]]);export{w as default};
