import{C as e,k as s,o as t,c as a,w as i,i as n,f as r,g as d,t as o,a as l,b as c,F as u,h as g,e as f,q as h}from"./index-BnkPbRWe.js";import{_ as p,a as y}from"./uni-grid.BMxBP-g9.js";import{r as _}from"./uni-app.es.BNROM5dI.js";import{_ as x}from"./uni-icons.CBn4UW0X.js";import{a as m,f as b,q as w}from"./index.t3y0XkbU.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=k({data:()=>({days:[],signin:[],signin_day:0}),onLoad(){const e=this.getDaysInCurrentMonth();this.days=e,this.days.length>0&&this.getAset()},methods:{getDaysInCurrentMonth(){const e=new Date,s=e.getFullYear(),t=e.getMonth(),a=new Date(s,t+1,0).getDate(),i=[];for(let n=1;n<=a;n++)i.push({day:n,reward:0});return i},getAset(){m().then((e=>{this.signin=e.data.signin,this.days.forEach((e=>{this.signin.forEach((s=>{e.day==s.day&&(e.reward=s.reward)}))}))})),b().then((e=>{console.log("getUserInfo",e),this.signin_day=e.data.signin_day}))},signInBtn(){w().then((s=>{e({title:s.msg,icon:0}),1==s.code&&this.getAset()}))}}},[["render",function(e,m,b,w,k,j){const v=g,I=n,C=_(s("uni-grid-item"),p),D=_(s("uni-grid"),y),q=_(s("uni-icons"),x);return t(),a(I,{class:"bg-white mt-10",style:{"border-radius":"10px"}},{default:i((()=>[r(I,{class:"p-15 fs-12 text-center fb"},{default:i((()=>[d(" 您已累计签到 "),r(v,{style:{color:"red"}},{default:i((()=>[d(o(k.signin_day),1)])),_:1}),d(" 次 ")])),_:1}),r(I,{class:""},{default:i((()=>[r(I,{class:"",style:{width:"100%",height:"45px",background:"#fe35c2","border-radius":"10px 10px 0 0"}}),r(I,{style:{"background-image":"url(/static/images/login-bg.png)",height:"330px","background-size":"cover"}},{default:i((()=>[r(I,{style:{"background-color":"rgba(255, 255, 255, 0.7)",height:"100%"}},{default:i((()=>[r(D,{column:7,"show-border":!1,square:!1},{default:i((()=>[(t(!0),l(u,null,c(k.days,((e,s)=>(t(),a(C,{index:s,key:s},{default:i((()=>[r(I,{class:"grid-item-box text-center fs-12",style:{color:"#9f78da"}},{default:i((()=>[e.reward?(t(),a(I,{key:1,class:f([s+1<=k.signin_day?"active active2":""])},{default:i((()=>[r(v,{class:"text"},{default:i((()=>[d("观影券")])),_:1}),h("br"),r(v,null,{default:i((()=>[d(o(e.reward)+"张",1)])),_:2},1024)])),_:2},1032,["class"])):(t(),a(v,{key:0,class:f(["text",s+1<=k.signin_day?"active":""]),style:{border:"#9f78da 1px solid","border-radius":"50%",width:"35px",height:"35px","line-height":"35px"}},{default:i((()=>[d(o(e.day),1)])),_:2},1032,["class"]))])),_:2},1024)])),_:2},1032,["index"])))),128))])),_:1})])),_:1})])),_:1}),r(I,{class:"text-center mt-10 p-10 flex-center2"},{default:i((()=>[r(I,{class:"flex-center",onClick:j.signInBtn,style:{padding:"6px 15px",background:"#a7a7a7","border-radius":"20px","font-size":"13px",color:"#fff"}},{default:i((()=>[r(q,{type:"plus",size:"20",color:"#fff"}),r(v,null,{default:i((()=>[d(" 点我签到")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-71c38121"]]);export{j as default};
